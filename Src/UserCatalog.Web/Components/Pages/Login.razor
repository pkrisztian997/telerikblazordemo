@page "/login"
@using System.ComponentModel.DataAnnotations
@using Microsoft.AspNetCore.Components.Forms
@using Telerik.Blazor.Components

<PageTitle>Login</PageTitle>

<div class="k-flex k-justify-content-center k-align-items-center" style="height:100vh;">
    <div class="k-card" style="min-width:320px; max-width:420px; width:100%;">
        <div class="k-card-header">
            <h3 style="margin:0;">Login</h3>
        </div>
        <div class="k-card-body" style="padding:1.25rem;">
            <EditForm EditContext="@_editContext" OnValidSubmit="HandleValidSubmit">
                <DataAnnotationsValidator />
                <ValidationSummary />

                <div class="mb-3">
                    <label class="form-label">Username</label>
                    <TelerikTextBox @bind-Value="_model.Username" Placeholder="Enter Username" />
                    <ValidationMessage For="@(() => _model.Username)" />
                </div>

                <div class="mb-3">
                    <label class="form-label">Password</label>
                    <TelerikTextBox @bind-Value="_model.Password" Placeholder="Enter Password" Password="true" />
                    <ValidationMessage For="@(() => _model.Password)" />
                </div>

                <div class="k-form-buttons">
                    <TelerikButton ButtonType="ButtonType.Submit" Class="k-primary">Login</TelerikButton>
                </div>
            </EditForm>
        </div>
    </div>
</div>

@code {
    private LoginModel _model = new();
    private EditContext _editContext;

    protected override void OnInitialized()
    {
        _editContext = new EditContext(_model);
    }

    private Task HandleValidSubmit()
    {
        // TODO: perform login using injected services
        return Task.CompletedTask;
    }

    private sealed class LoginModel
    {
        [Required(ErrorMessage = "Username is required")]
        public string? Username { get; set; }

        [Required(ErrorMessage = "Password is required")]
        public string? Password { get; set; }
    }
}
